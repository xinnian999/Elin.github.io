{"version":3,"file":"static/js/762.82a59377.chunk.js","mappings":"qOAMIA,EAAgB,SAAuBC,EAAOC,GAChD,OAAoBC,EAAAA,cAAoBC,EAAAA,GAAUC,EAAAA,EAAAA,IAAcA,EAAAA,EAAAA,GAAc,CAAC,EAAGJ,GAAQ,CAAC,EAAG,CAC5FC,IAAKA,EACLI,KAAMC,EAAAA,IAEV,EACAP,EAAcQ,YAAc,gBAC5B,MAA4BL,EAAAA,WAAiBH,G,6ECJvCS,EAAaC,EAAAA,GAAAA,IAAAA,WAAU,CAAAF,YAAA,aAAAG,YAAA,eAAVD,CAAU,yXAiCvBE,GAAWF,EAAAA,EAAAA,IAAOG,EAAAA,EAAAA,MAAUC,WAAA,CAAAN,YAAA,WAAAG,YAAA,eAAjBD,CAAiB,iFAO5BK,EAAS,CACb,QACA,aACA,2BACA,QACA,OACA,eACA,UACA,MACA,OACA,MACA,KACA,SAGIC,EAAa,SAACC,GAClB,IAAIC,EAAI,CAAEC,KAAM,GAAIC,KAAM,IAC1B,OAAQH,EAAKI,KACX,IAAK,UACHH,EAAEC,KAAO,eACTD,EAAEE,KAAI,YAAAE,OAAeL,EAAKM,IAC1B,MACF,IAAK,OACHL,EAAEC,KAAO,eACTD,EAAEE,KAAI,oBAAAE,OAAuBL,EAAKM,IAClC,MACF,IAAK,OACHL,EAAEC,KAAO,2BACTD,EAAEE,KAAOH,EAAKG,KACd,MACF,IAAK,OACHF,EAAEC,KAAO,2BACTD,EAAEE,KAAOH,EAAKG,KAMlB,OAAOF,CACT,EAqGA,MAnGA,WACE,IAAAM,GAA0BC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAA/BI,EAAKF,EAAA,GAAEG,EAAQH,EAAA,GACtBI,GAA4BL,EAAAA,EAAAA,UAAgB,IAAGM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAxCE,EAAMD,EAAA,GAAEE,EAASF,EAAA,GACxBG,GAAoCT,EAAAA,EAAAA,UAAmB,IAAGU,GAAAR,EAAAA,EAAAA,GAAAO,EAAA,GAAnDE,EAAUD,EAAA,GAAEE,EAAaF,EAAA,GAChCG,GAA4BC,EAAAA,EAAAA,KAAW,GAAMC,GAAAb,EAAAA,EAAAA,GAAAW,EAAA,GAAtCG,EAAQD,EAAA,GAAEE,EAAEF,EAAA,GAAEG,EAAGH,EAAA,GAClBI,EAASC,EAAAA,IAAAA,aAEfC,EAAAA,EAAAA,KAAS,WACP,IAAMC,EAAgBC,aAAaC,QAAQ,cACvCF,GAAeV,EAAca,KAAKC,MAAMJ,IAC5ClB,EAASe,EAAOQ,GAChBC,EAAST,EAAOQ,EAClB,IAEA,IAAMC,EAAW,SAACC,GAChB,GAAIA,EAAK,CACPT,EAAAA,IAAAA,UAAc,CAAEO,EAAGE,IACnB,IAAMC,EAAO,GAAAjC,QAAAkC,EAAAA,EAAAA,GAAOpB,GAAU,CAAEkB,IAChCN,aAAaS,QAAQ,aAAcP,KAAKQ,UAAUH,IAClDlB,EAAckB,IACdI,EAAAA,EAAAA,IAAa,CAACd,IAAI,cAAcD,OAAQ,CAAEQ,EAAGE,KAAQM,MAAK,SAACC,GACzDnB,IAEAT,EAAU4B,EACZ,GACF,MACElB,GAEJ,EAEA,OACEmB,EAAAA,EAAAA,KAACC,EAAAA,GAAK,CAACC,MAAM,2BAAMC,UACjBC,EAAAA,EAAAA,MAACzD,EAAU,CAAAwD,SAAA,EACTH,EAAAA,EAAAA,KAAA,OAAKK,UAAU,QAAOF,UACpBH,EAAAA,EAAAA,KAACM,EAAAA,EAAAA,OAAY,CACXC,YAAY,uFACZF,UAAU,cACVG,YAAU,EACVjB,SAAUA,EACVzB,MAAOA,EACP2C,SAAU,SAACjB,GAAG,OAAKzB,EAASyB,EAAIkB,OAAO5C,MAAM,MAGhDa,GACCqB,EAAAA,EAAAA,KAACjD,EAAAA,EAAI,CACH4D,QACEP,EAAAA,EAAAA,MAAA,QAAMC,UAAU,QAAOF,SAAA,CAAC,eAAGjC,EAAO0C,OAAO,0CAE3CC,WAAY3C,EACZ4C,OAAQ,CAAEC,UAAW,oDACrBC,WAAY,SAAC7D,GAAI,OACfiD,EAAAA,EAAAA,MAACtD,EAAQ,CACPmE,QAAS,EAACjB,EAAAA,EAAAA,KAAC9D,EAAa,KACxBgF,QAAS,kBAAMC,OAAOC,KAAKlE,EAAWC,GAAMG,KAAM,QAAQ,EAAC6C,SAAA,CAC5D,SACGjD,EAAWC,GAAME,KAAK,UAAGF,EAAK+C,OAAS/C,EAAKE,OACrC,KAIf+C,EAAAA,EAAAA,MAAAiB,EAAAA,SAAA,CAAAlB,SAAA,EACEC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,QAAOF,SAAA,EACpBH,EAAAA,EAAAA,KAAA,KAAAG,SAAG,8BACHH,EAAAA,EAAAA,KAAA,OAAKK,UAAU,MAAKF,SACjBlD,EAAOqE,KAAI,SAACnE,GACX,OACE6C,EAAAA,EAAAA,KAAA,QAEEK,UAAU,UACVa,QAAS,WACPnD,EAASZ,GACToC,EAASpC,EACX,EAAEgD,SAEDhD,GAPIA,EAUX,UAGJiD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,QAAOF,SAAA,EACpBH,EAAAA,EAAAA,KAAA,KAAAG,SAAG,8BACHH,EAAAA,EAAAA,KAAA,OAAKK,UAAU,MAAKF,SACjB7B,EAAWgD,KAAI,SAACnE,GACf,OACE6C,EAAAA,EAAAA,KAAA,QAAiBK,UAAU,UAASF,SACjChD,GADQA,EAIf,gBAQhB,C","sources":["../node_modules/.pnpm/@ant-design+icons@5.0.1_react-dom@18.2.0_react@18.2.0/node_modules/@ant-design/icons/es/icons/RightOutlined.js","views/Search.tsx"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport RightOutlinedSvg from \"@ant-design/icons-svg/es/asn/RightOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar RightOutlined = function RightOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: RightOutlinedSvg\n  }));\n};\nRightOutlined.displayName = 'RightOutlined';\nexport default /*#__PURE__*/React.forwardRef(RightOutlined);","import { useBoolean, useMount } from \"@/hooks\";\r\nimport { RightOutlined } from \"@ant-design/icons\";\r\nimport styled from \"styled-components\";\r\nimport { Input, List } from \"antd\";\r\nimport { request } from \"@/utils\";\r\nimport { useState } from \"react\";\r\nimport { Plate } from \"@/components\";\r\nimport { url } from \"hyl-utils\";\r\n\r\nconst SearchMain = styled.div`\r\n  padding: 25px;\r\n  margin: 0 auto;\r\n  min-height: 80vh;\r\n  .block {\r\n    padding: 10px;\r\n  }\r\n  .hot {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    width: 100%;\r\n    flex-wrap: wrap;\r\n    .hotItem {\r\n      padding: 5px;\r\n      background-color: var(--highlight-background-color);\r\n      border-radius: 5px;\r\n      margin: 0 10px 10px 0;\r\n      &:last-child {\r\n        margin-right: auto;\r\n      }\r\n    }\r\n  }\r\n  .searchInput {\r\n    display: block;\r\n    height: 60px;\r\n    width: 600px;\r\n    margin: 0 auto;\r\n  }\r\n  .count {\r\n    font-size: 20px;\r\n  }\r\n`;\r\n\r\nconst ListItem = styled(List.Item)`\r\n  cursor: pointer;\r\n  &:hover {\r\n    background-color: var(--highlight-background-color);\r\n  }\r\n`;\r\n\r\nconst hotTag = [\r\n  \"react\",\r\n  \"javascript\",\r\n  \"性能优化\",\r\n  \"mysql\",\r\n  \"node\",\r\n  \"前端\",\r\n  \"chatgpt\",\r\n  \"vue\",\r\n  \"html\",\r\n  \"css\",\r\n  \"js\",\r\n  \"nginx\",\r\n];\r\n\r\nconst enumResult = (item) => {\r\n  let r = { name: \"\", link: \"\" };\r\n  switch (item.tag) {\r\n    case \"article\":\r\n      r.name = \"文章\";\r\n      r.link = `/article/${item.id}`;\r\n      break;\r\n    case \"note\":\r\n      r.name = \"笔记\";\r\n      r.link = `/journal/note?id=${item.id}`;\r\n      break;\r\n    case \"work\":\r\n      r.name = \"个人作品\";\r\n      r.link = item.link;\r\n      break;\r\n    case \"link\":\r\n      r.name = \"友情链接\";\r\n      r.link = item.link;\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n\r\n  return r;\r\n};\r\n\r\nfunction Search() {\r\n  const [value, setValue] = useState(\"\");\r\n  const [result, setResult] = useState<any[]>([]);\r\n  const [historyTag, setHistoryTag] = useState<string[]>([]);\r\n  const [isSearch, on, off] = useBoolean(false);\r\n  const params = url.getParams();\r\n\r\n  useMount(() => {\r\n    const historySearch = localStorage.getItem(\"historyTag\");\r\n    if (historySearch) setHistoryTag(JSON.parse(historySearch));\r\n    setValue(params.q);\r\n    onSearch(params.q);\r\n  });\r\n\r\n  const onSearch = (val: string) => {\r\n    if (val) {\r\n      url.setParams({ q: val });\r\n      const history = [...historyTag, val];\r\n      localStorage.setItem(\"historyTag\", JSON.stringify(history));\r\n      setHistoryTag(history);\r\n      request<any>({url:`/all/search`,params: { q: val }}).then((res) => {\r\n        on();\r\n\r\n        setResult(res);\r\n      });\r\n    } else {\r\n      off();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Plate title=\"全站搜索\">\r\n      <SearchMain>\r\n        <div className=\"block\">\r\n          <Input.Search\r\n            placeholder=\"请输入搜索字段，支持模糊查询\"\r\n            className=\"searchInput\"\r\n            allowClear\r\n            onSearch={onSearch}\r\n            value={value}\r\n            onChange={(val) => setValue(val.target.value)}\r\n          />\r\n        </div>\r\n        {isSearch ? (\r\n          <List\r\n            header={\r\n              <span className=\"count\">共有{result.length}个搜索结果：</span>\r\n            }\r\n            dataSource={result}\r\n            locale={{ emptyText: \"哦！没有搜索结果\" }}\r\n            renderItem={(item) => (\r\n              <ListItem\r\n                actions={[<RightOutlined />]}\r\n                onClick={() => window.open(enumResult(item).link, \"_self\")}\r\n              >\r\n                【{enumResult(item).name}】 {item.title || item.name}\r\n              </ListItem>\r\n            )}\r\n          />\r\n        ) : (\r\n          <>\r\n            <div className=\"block\">\r\n              <p>热门搜索</p>\r\n              <div className=\"hot\">\r\n                {hotTag.map((item) => {\r\n                  return (\r\n                    <span\r\n                      key={item}\r\n                      className=\"hotItem\"\r\n                      onClick={() => {\r\n                        setValue(item);\r\n                        onSearch(item);\r\n                      }}\r\n                    >\r\n                      {item}\r\n                    </span>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            <div className=\"block\">\r\n              <p>历史搜索</p>\r\n              <div className=\"hot\">\r\n                {historyTag.map((item) => {\r\n                  return (\r\n                    <span key={item} className=\"hotItem\">\r\n                      {item}\r\n                    </span>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </SearchMain>\r\n    </Plate>\r\n  );\r\n}\r\n\r\nexport default Search;\r\n"],"names":["RightOutlined","props","ref","React","AntdIcon","_objectSpread","icon","RightOutlinedSvg","displayName","SearchMain","styled","componentId","ListItem","List","withConfig","hotTag","enumResult","item","r","name","link","tag","concat","id","_useState","useState","_useState2","_slicedToArray","value","setValue","_useState3","_useState4","result","setResult","_useState5","_useState6","historyTag","setHistoryTag","_useBoolean","useBoolean","_useBoolean2","isSearch","on","off","params","url","useMount","historySearch","localStorage","getItem","JSON","parse","q","onSearch","val","history","_toConsumableArray","setItem","stringify","request","then","res","_jsx","Plate","title","children","_jsxs","className","Input","placeholder","allowClear","onChange","target","header","length","dataSource","locale","emptyText","renderItem","actions","onClick","window","open","_Fragment","map"],"sourceRoot":""}