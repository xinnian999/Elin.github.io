"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[588],{36588:function(e,a,t){t.r(a),t.d(a,{default:function(){return w}});var r=t(30001),i=t(53596),n=t(76566),o=t(37556),c=t(54998),s=t(40997),l=t(89559),p=t(94965),d=t(96164),u=t(19058),m=t(58054),g=t(72704),f=(0,t(43493).Ue)((function(e,a){return{articleData:[],total:0,params:{pageNum:1,pageSize:12,filters:{publish:1},orderBys:{topping:"desc",createTime:"desc"}},loading:!1,value:"",setParams:function(t){e({params:(0,r.Z)((0,r.Z)({},a().params),{},{pageNum:1},t)})},setParamsFilter:function(e){var t=a(),i=t.setParams,n=t.params;i({filters:(0,r.Z)((0,r.Z)({},n.filters),e)})},reset:function(){e(a())},fetchData:function(){var t=(0,m.Z)((0,u.Z)().mark((function t(){var r,i,n,o;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={url:"/current/query/article",method:"get",params:a().params},e({loading:!0}),t.next=4,(0,g.WY)(r);case 4:i=t.sent,n=i.data,o=i.total,e({loading:!1,articleData:n,total:o});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),onSearch:function(e){a().setParamsFilter({tag:"",title:e})},onClickCategory:function(t){a().setParamsFilter({category:t===a().params.filters.category?"":t,title:""}),e({value:""})},onClickOrderBy:function(t){a().setParams({orderBys:(0,d.Z)({topping:"createTime"===t?"desc":""},t,"desc")}),e({value:""})},onChangePage:function(e){var t=e.pageNum,r=e.pageSize,i=e.listRef;a().setParams({pageNum:t,pageSize:r}),window.scrollTo({top:i.current.getBoundingClientRect().top+document.documentElement.scrollTop-300,behavior:"smooth"})}}})),h=f,x=t(98110),y=x.ZP.div.withConfig({displayName:"ArticleListWrapper",componentId:"sc-1ncjn7t-0"})([".bar{background-color:#fff;border-radius:15px;padding:20px;box-shadow:var(--box-shadow);}.page-bar{padding:10px;}.articleList{display:flex;flex-wrap:wrap;.articleItem{width:calc(25% - 12px);margin-bottom:15px;margin-right:15px;&:nth-child(4n){margin-right:0;}&:last-child{margin-right:auto;}}}.search-bar{padding:0 150px;margin-bottom:20px;}.filter-bar{width:100%;margin-bottom:20px;.filter-type{font-size:14px;width:40px;border-right:1px solid #999;}}"]),v=x.ZP.div.withConfig({displayName:"FilterText",componentId:"sc-1ncjn7t-1"})(["color:",";font-size:14px;cursor:pointer;&:hover{color:var(--ant-primary-4);}"],(function(e){return e.active?"var(--ant-primary-color)":"#666"})),b=(x.ZP.div.withConfig({displayName:"ArticleItem",componentId:"sc-1ncjn7t-2"})(["border-radius:10px;display:flex;margin:0 auto;height:200px;margin-bottom:20px;padding:10px 0;.image{height:100%;width:30%;border-radius:15px;display:block;}.info{width:70%;height:100%;margin-left:20px;display:flex;flex-direction:column;justify-content:space-between;padding:15px 0;.top{h2{transition:0.7s all;cursor:pointer;color:#3c4858;&:hover{color:var(--ant-primary-color);}}.introduce{margin-top:10px;}.tags{font-size:13px;}}.last{display:flex;justify-content:space-between;margin-top:8px;font-size:13px;.time{margin-right:20px;}}}"]),t(32518)),j=h.setState,k=[{name:"\u65e5\u671f",key:"createTime"},{name:"\u6d4f\u89c8",key:"visits"},{name:"\u70b9\u8d5e",key:"like"},{name:"\u8bc4\u8bba",key:"comments"}],w=function(){var e=h(),a=e.articleData,t=e.params,d=e.total,u=e.loading,m=e.value,g=e.fetchData,f=e.onChangePage,x=e.onClickCategory,w=e.onClickOrderBy,C=e.onSearch,N=(0,p.useRef)(null),Z=(0,n.aM)({url:"/current/query/category",params:{filters:{belong:"article"}}}).data,z=t.pageNum,P=t.pageSize,S=t.filters;return(0,p.useEffect)((function(){g()}),[t]),(0,b.jsx)(i.hv,{title:"\u6587\u7ae0\u5217\u8868",bg:"bg23.jpg",hasBackgroundColor:!1,children:(0,b.jsxs)(y,{children:[(0,b.jsxs)("div",{className:"bar",children:[(0,b.jsx)("div",{className:"search-bar",children:(0,b.jsx)(l.Z,{placeholder:"\u8f93\u5165\u5173\u952e\u8bcd\u641c\u7d22\u6587\u7ae0",onSearch:C,enterButton:!0,value:m,onChange:function(e){return j({value:e.target.value})}})}),(0,b.jsxs)(o.Z,{wrap:!0,size:16,className:"filter-bar",children:[(0,b.jsx)("div",{className:"filter-type",children:"\u5206\u7c7b"}),(0,b.jsx)(v,{active:!S.category,onClick:function(){return x("")},children:"\u5168\u90e8"}),Z.map((function(e){var a=e.name;return(0,b.jsx)(v,{active:S.category===a,onClick:function(){return x(a)},children:a},a)}))]}),(0,b.jsxs)(o.Z,{wrap:!0,size:16,className:"filter-bar",children:[(0,b.jsx)("div",{className:"filter-type",children:"\u6392\u5e8f"}),k.map((function(e){var a=e.name,r=e.key;return(0,b.jsx)(v,{active:!!t.orderBys[r],onClick:function(){return w(r)},children:a},a)}))]})]}),(0,b.jsxs)("div",{className:"page-bar",children:["\u7b2c",z,"\u9875"]}),(0,b.jsx)(c.Z,{spinning:u,children:(0,b.jsx)("div",{className:"articleList",ref:N,children:a.map((function(e){return(0,p.createElement)(i.Tn,(0,r.Z)((0,r.Z)({},e),{},{key:e.id,className:"articleItem"}))}))})}),(0,b.jsx)(s.Z,{current:z,pageSize:P,total:d,onChange:function(e,a){return f({pageNum:e,pageSize:a,listRef:N})},pageSizeOptions:[5,10,20,30]})]})})}}}]);
//# sourceMappingURL=588.c5c83441.chunk.js.map