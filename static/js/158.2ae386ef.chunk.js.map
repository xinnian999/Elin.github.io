{"version":3,"file":"static/js/158.2ae386ef.chunk.js","mappings":"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","sources":["../node_modules/.pnpm/@ant-design+icons-svg@4.2.1/node_modules/@ant-design/icons-svg/es/asn/UnorderedListOutlined.js","../node_modules/.pnpm/@ant-design+icons@5.0.1_react-dom@18.2.0_react@18.2.0/node_modules/@ant-design/icons/es/icons/UnorderedListOutlined.js","../node_modules/.pnpm/@ant-design+icons-svg@4.2.1/node_modules/@ant-design/icons-svg/es/asn/CheckSquareOutlined.js","../node_modules/.pnpm/@ant-design+icons@5.0.1_react-dom@18.2.0_react@18.2.0/node_modules/@ant-design/icons/es/icons/CheckSquareOutlined.js","views/Details/ArticleDetail/styled.ts","views/Details/ArticleDetail/ToolItem.tsx","views/Details/ArticleDetail/index.tsx","views/Home/api.ts"],"sourcesContent":["// This icon file is generated automatically.\nvar UnorderedListOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z\" } }] }, \"name\": \"unordered-list\", \"theme\": \"outlined\" };\nexport default UnorderedListOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport UnorderedListOutlinedSvg from \"@ant-design/icons-svg/es/asn/UnorderedListOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar UnorderedListOutlined = function UnorderedListOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: UnorderedListOutlinedSvg\n  }));\n};\nUnorderedListOutlined.displayName = 'UnorderedListOutlined';\nexport default /*#__PURE__*/React.forwardRef(UnorderedListOutlined);","// This icon file is generated automatically.\nvar CheckSquareOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M433.1 657.7a31.8 31.8 0 0051.7 0l210.6-292c3.8-5.3 0-12.7-6.5-12.7H642c-10.2 0-19.9 4.9-25.9 13.3L459 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H315c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z\" } }] }, \"name\": \"check-square\", \"theme\": \"outlined\" };\nexport default CheckSquareOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport CheckSquareOutlinedSvg from \"@ant-design/icons-svg/es/asn/CheckSquareOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar CheckSquareOutlined = function CheckSquareOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: CheckSquareOutlinedSvg\n  }));\n};\nCheckSquareOutlined.displayName = 'CheckSquareOutlined';\nexport default /*#__PURE__*/React.forwardRef(CheckSquareOutlined);","import styled from \"styled-components\";\r\n\r\nexport const ArticleDetailWrapper = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport const Main = styled.div`\r\n  border-radius: 10px;\r\n  padding: 10px 20px;\r\n  width: 75%;\r\n  background-color: #fff;\r\n`;\r\n\r\nexport const Toolbar = styled.div`\r\n  width: 23%;\r\n`;\r\n\r\nexport const AboutArticle = styled.div`\r\n  max-height: 30vh;\r\n  overflow: auto;\r\n\r\n  .item {\r\n    margin-bottom: 10px;\r\n    &-title {\r\n      cursor: pointer;\r\n      &:hover {\r\n        color: var(--ant-primary-color);\r\n      }\r\n    }\r\n    &-info {\r\n      color: #909090;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ToolItem = styled.div`\r\n  padding: 15px;\r\n  font-size: 15px;\r\n  background-color: #fff;\r\n  border-radius: 10px;\r\n  margin-bottom: 25px;\r\n  .catalogue {\r\n    font-size: 18px;\r\n  }\r\n  .ant-divider-horizontal {\r\n    margin: 10px auto;\r\n  }\r\n`;\r\n","import { Divider } from \"antd\";\r\nimport { ToolItem as ToolItemWrapper } from \"./styled\";\r\n\r\ninterface ToolItemProps {\r\n  title: string;\r\n  icon: any;\r\n  children: React.ReactNode;\r\n}\r\n\r\nfunction ToolItem(props: ToolItemProps) {\r\n  const { title, icon, children } = props;\r\n  return (\r\n    <ToolItemWrapper>\r\n      <div className=\"catalogue\">\r\n        {icon} <span>{title}</span>\r\n      </div>\r\n      <Divider></Divider>\r\n      {children}\r\n    </ToolItemWrapper>\r\n  );\r\n}\r\n\r\nexport default ToolItem;\r\n","import { Anchor, Comment, Markdown, Plate } from '@/components';\r\nimport { useGetData, useSetState, useWindowSize } from '@/hooks';\r\nimport { changeBlogTitle } from '@/utils';\r\nimport { CheckSquareOutlined, UnorderedListOutlined } from '@ant-design/icons';\r\nimport { Affix } from 'antd';\r\nimport { time } from 'hyl-utils';\r\nimport { useRef } from 'react';\r\nimport { flushSync } from 'react-dom';\r\nimport { useParams } from 'react-router-dom';\r\nimport { addArticleVisits, queryAboutArticle } from '../../Home/api';\r\nimport ToolItem from './ToolItem';\r\nimport { AboutArticle, ArticleDetailWrapper, Main, Toolbar } from './styled';\r\n\r\nfunction ArticleDetail() {\r\n  const [{ info, targetOffset, anchorList, aboutArticle }, setState] =\r\n    useSetState<ArticleDetailState>({\r\n      info: {\r\n        content: '',\r\n        title: '这是一个文章的标题',\r\n        createTime: time.parse(new Date()),\r\n        visits: 0,\r\n        updateTime: time.parse(new Date()),\r\n        category: [],\r\n      },\r\n      targetOffset: 0,\r\n      anchorList: [],\r\n      aboutArticle: [],\r\n    });\r\n\r\n  const params = useParams();\r\n  const mdRef: any = useRef(null);\r\n  const size = useWindowSize();\r\n\r\n  useGetData('/article/queryDetail', {\r\n    data: { id: params.id },\r\n    onSuccess: res => {\r\n      const [data] = res.data;\r\n\r\n      flushSync(() => {\r\n        setState({ info: data });\r\n      });\r\n\r\n      //生成锚点\r\n      setState({\r\n        anchorList: [...mdRef.current.children[0].querySelectorAll('h2,h3')],\r\n        targetOffset: window.innerHeight / 4,\r\n      });\r\n\r\n      //查询相关文章\r\n      queryAboutArticle(data.category).then((res: any) => {\r\n        setState({\r\n          aboutArticle: res.data.filter(item => item.id !== Number(params.id)),\r\n        });\r\n      });\r\n\r\n      // 设置页面标题\r\n      changeBlogTitle('', data.title);\r\n\r\n      // 文章阅读量+1\r\n      setTimeout(() => {\r\n        addArticleVisits({\r\n          id: params.id,\r\n          updateTime: time.parse(data.updateTime),\r\n        });\r\n      }, 3000);\r\n    },\r\n  });\r\n\r\n  const { title, category, createTime, updateTime, content } = info;\r\n\r\n  // const articleInfo = useMemo(\r\n  //   () => (\r\n  //     <Space size={20} direction={size.width > 800 ? 'horizontal' : 'vertical'}>\r\n  //       <span>\r\n  //         {category.map((item: string) => (\r\n  //           <Tag icon={<Icon type='icon-biaoqian2' />} color='pink' key={item}>\r\n  //             {item}\r\n  //           </Tag>\r\n  //         ))}\r\n  //       </span>\r\n  //       <span>\r\n  //         <Icon type='icon-fabu' /> 发布日期：\r\n  //         {time.parse(createTime, 'YYYY-MM-DD')}\r\n  //       </span>\r\n  //       <span>\r\n  //         <Icon type='icon-banbengengxin' /> 更新日期：\r\n  //         {time.parse(updateTime, 'YYYY-MM-DD')}\r\n  //       </span>\r\n  //       <span>\r\n  //         <Icon type='icon-word' /> 文章字数：\r\n  //         {content.length > 1000\r\n  //           ? `${~~(content.length / 100) / 10}k`\r\n  //           : content.length}\r\n  //       </span>\r\n  //     </Space>\r\n  //   ),\r\n  //   [info, size]\r\n  // );\r\n\r\n  return (\r\n    <Plate title={title} hasBackgroundColor={false}>\r\n      <ArticleDetailWrapper>\r\n        <Main>\r\n          <Markdown content={content} ref={mdRef} />\r\n          <Comment\r\n            articleId={params.id as string}\r\n            title='评论区'\r\n            btnName='提交评论'\r\n          />\r\n        </Main>\r\n\r\n        <Toolbar>\r\n          <Affix offsetTop={80}>\r\n            <ToolItem title='目录' icon={<UnorderedListOutlined />}>\r\n              <Anchor\r\n                targetOffset={targetOffset}\r\n                style={{ maxHeight: '40vh' }}\r\n                anchorData={anchorList}\r\n              />\r\n            </ToolItem>\r\n            <ToolItem title='相关阅读' icon={<CheckSquareOutlined />}>\r\n              <AboutArticle>\r\n                {aboutArticle.map(({ title, visits, comments, id }) => (\r\n                  <div className='item' key={title}>\r\n                    <div\r\n                      className='item-title'\r\n                      onClick={() => window.open(`/article/${id}`, '_self')}\r\n                    >\r\n                      {title}\r\n                    </div>\r\n                    <div className='item-info'>\r\n                      {comments}评论 | {visits}阅读\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </AboutArticle>\r\n            </ToolItem>\r\n          </Affix>\r\n        </Toolbar>\r\n      </ArticleDetailWrapper>\r\n    </Plate>\r\n  );\r\n}\r\n\r\nexport default ArticleDetail;\r\n","import { request } from '@/utils';\r\n\r\nexport const addArticleVisits = data =>\r\n  request({ url: '/article/visit', method: 'put', data });\r\n\r\nexport const queryAboutArticle = category => {\r\n  const params = {\r\n    pageNum: 1,\r\n    pageSize: 6,\r\n    orderBys: 'topping desc,id desc',\r\n    filters: { publish: 1, category },\r\n  };\r\n  return request({ url: '/article/query', params });\r\n};\r\n"],"names":["UnorderedListOutlined","props","ref","React","AntdIcon","_objectSpread","icon","UnorderedListOutlinedSvg","displayName","CheckSquareOutlined","CheckSquareOutlinedSvg","ArticleDetailWrapper","styled","componentId","Main","Toolbar","AboutArticle","ToolItem","title","children","_jsxs","ToolItemWrapper","className","_jsx","Divider","_useSetState","useSetState","info","content","createTime","time","Date","visits","updateTime","category","targetOffset","anchorList","aboutArticle","_useSetState2","_slicedToArray","_useSetState2$","setState","params","useParams","mdRef","useRef","useWindowSize","useGetData","data","id","onSuccess","res","flushSync","_toConsumableArray","current","querySelectorAll","window","innerHeight","pageNum","pageSize","orderBys","filters","publish","request","url","queryAboutArticle","then","filter","item","Number","changeBlogTitle","setTimeout","method","addArticleVisits","Plate","hasBackgroundColor","Markdown","Comment","articleId","btnName","Affix","offsetTop","Anchor","style","maxHeight","anchorData","map","_ref","comments","onClick","open","concat"],"sourceRoot":""}